{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "ダッシュボード" %} | {% trans "EDIシステム" %}{% endblock %}

{% block content %}
<div class="card">
    <h1 style="margin-top: 0; font-family: 'Outfit', sans-serif;">{% trans "進捗管理ダッシュボード" %}</h1>
    <p style="color: var(--text-dim);">{% blocktrans with username=user.username %}ようこそ、<strong>{{ username }}</strong>
        さん。現在の業務進捗状況です。{% endblocktrans %}</p>

    {% if is_authorized %}
    <div style="margin: 1.5rem 0; display: flex; gap: 1rem; flex-wrap: wrap;">
        {% if user.is_staff %}
        <a href="{% url 'core:quick_partner_registration' %}" class="btn btn-secondary">
            <i class="fas fa-user-plus"></i> {% trans "取引先新規登録" %}
        </a>
        {% endif %}
        <a href="{% url 'orders:order_list' %}" class="btn btn-secondary">{% trans "注文書一覧" %}</a>
        <a href="{% url 'invoices:partner_invoice_list' %}" class="btn btn-secondary">{% trans "請求書（支払通知）一覧" %}</a>
        <a href="{% url 'core:contract_progress_list' %}" class="btn btn-secondary">{% trans "基本契約進捗" %}</a>
        {% if not user.is_staff %}
        <a href="{% url 'core:partner_onboarding' %}" class="btn"
            style="background: var(--bg-card); color: var(--text-main); border: 1px solid var(--border-color);">
            <i class="fas fa-edit"></i> {% trans "会社情報を登録・更新する" %}
        </a>
        <a href="{% url 'core:partner_manual' %}" class="btn"
            style="background: var(--bg-card); color: var(--text-main); border: 1px solid var(--border-color);">
            <i class="fas fa-book-open"></i> {% trans "操作マニュアル" %}
        </a>
        {% endif %}
    </div>
    {% endif %}

    <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
        <div
            style="background: rgba(79, 70, 229, 0.1); border: 1px solid rgba(79, 70, 229, 0.2); border-radius: 12px; padding: 1.5rem;">
            <h3 style="margin: 0; color: #818CF8;">{% trans "未確認の発注" %}</h3>
            <p style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0;">{{ unconfirmed_orders_count }} <span
                    style="font-size: 1rem; color: var(--text-dim);">{% trans "件" %}</span></p>
        </div>
        <div
            style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 1.5rem;">
            <h3 style="margin: 0; color: #34D399;">{% trans "受領済の通知" %}</h3>
            <p style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0;">{{ received_orders_count }} <span
                    style="font-size: 1rem; color: var(--text-dim);">{% trans "件" %}</span></p>
        </div>
        <div
            style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2); border-radius: 12px; padding: 1.5rem;">
            <h3 style="margin: 0; color: #FBBF24;">{% trans "支払通知確認中" %}</h3>
            <p style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0;">{{ confirming_invoices_count }} <span
                    style="font-size: 1rem; color: var(--text-dim);">{% trans "件" %}</span></p>
        </div>
    </div>
</div>
{% endblock %}